{% extends "base.html" %}

{% load static %}
{% load translation %}

{% block head %}
  <style>
    td:first-child {
      white-space: nowrap;
    }
  </style>
{% endblock %}

{% block content %}
  <div class="mui-container-fluid">
    <div class="mui-row">
      <div class="mui-col-md-6 mui-col-md-offset-3">
        {% if booking.stage == "requested" %}
          {% if booking.dj.user == user %}
            {% if quote_form %}
              {{ quote_form.render }}
            {% else %}
              <p>{% tr "Please read the details of this booking request, and accept, decline, or provide a quote below." %}</p>
            {% endif %}
          {% else %}
            <p>{% tr "%s has been notified of this booking request and can accept, decline, or provide a quote. You will receive an email once they have responded." booking.dj.name %}</p>
          {% endif %}
        {% endif %}
        <table class="mui-table mui-table--bordered">
          <thead>
            <tr>
              <th colspan="2">{% tr "Booking" %}</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{% tr "DJ" %}</td>
              <td width="100%">{{ booking.dj.name }}</td>
            </tr>
            <tr>
              <td>{% tr "Status" %}</td>
              <td>{% tr booking.get_stage_display %}</td>
            </tr>
            <tr>
              <td>{% tr "Contact name" %}</td>
              <td>{{ booking.contact_name }}</td>
            </tr>
            <tr>
              <td>{% tr "Phone number" %}</td>
              <td>{{ booking.phone_number }}</td>
            </tr>
            <tr>
              <td>{% tr "Venue address" %}</td>
              <td>
                <p>{{ booking.address_line_1 }}</p>
                <p>{{ booking.address_line_2 }}</p>
                <p>{{ booking.city }}</p>
                <p>{{ booking.state }}</p>
                <p>{{ booking.post_code }}</p>
                <p>{{ booking.country }}</p>
              </td>
            </tr>
            <tr>
              <td>{% tr "Set time" %}</td>
              <td>{{ booking.set_time }}</td>
            </tr>
            <tr>
              <td>{% tr "Hours" %}</td>
              <td>{{ booking.hours }}</td>
            </tr>
            <tr>
              <td>{% tr "Equipment information" %}</td>
              <td>{{ booking.equipment_information }}</td>
            </tr>
            <tr>
              <td>{% tr "Other information" %}</td>
              <td>{{ booking.other_information }}</td>
            </tr>
            {% if booking.extra_budget %}
              <tr>
                <td>{% tr "Extra budget" %}</td>
                <td>{{ booking.extra_budget }}</td>
              </tr>
            {% endif %}
            <tr>
              <td>{% tr "Rate" %}</td>
              <td>{% tr "â‚¬%s per hour" booking.rate %}</td>
            </tr>
          </tbody>
        </table>
        {% if booking.stage == "requested" and booking.dj.user == user and not quote_form %}
          {{ accept_form.render }}
          {{ decline_form.render }}
          <a href="{% url "quote-booking" booking_id=booking.id %}" class="mui-btn mui-btn--primary mui-btn--raised">{% tr "Give a quote" %}</a>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}
